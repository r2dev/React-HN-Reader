<!DOCTYPE html>
<html>
	<head>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.4/react.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.4/react-dom.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.css">
	</head>
	<body>
		<div id="content">
			<script type="text/babel">
				var HNReaderWrapper = React.createClass({
					render: function() {
						return (
							<div className="hn-wrapper">
								<HNReaderItemPanel/>
								<HNReaderBrowser/>
							</div>
							);
					}
				});

				var HNReaderItemPanel = React.createClass({
					getInitialState: function() {
						return {top: []};
					},
					componentDidMount: function() {
						$.ajax({
							url: 'https://hacker-news.firebaseio.com/v0/topstories.json',
							dataType: 'json',
							cache: false,
							success: function(data) {
								this.setState({top: data});
							}.bind(this),
							error: function(xhr, status, err) {
								console.error('https://hacker-news.firebaseio.com/v0/topstories.json', status, err.toString());
							}.bind(this)
						})
					},
					render: function() {
						return (
							<div className="hn-item-panel">
								<HNReaderItemSearchBar/>
								<HNReaderItemList top={this.state.top}/>
							</div>
							);
					}
				});

				var HNReaderBrowser = React.createClass({
					render: function() {
						return (
							<div className="hn-browser">
								browser
							</div>
							);
					}
				});

				var HNReaderItemSearchBar = React.createClass({
					render: function() {
						return (
							<form>
								<input type="text" placeholder="Search...." />
							</form>
							);
					}
				});

				var HNReaderItemList = React.createClass({
					render: function() {
						var thingNodes = this.props.top.map(function(thing) {
							return (
								<li key={thing}> {thing} </li>
								);
						});
						return (
							<ul>
								{thingNodes}
							</ul>
							);
					}
				});

				ReactDOM.render(<HNReaderWrapper/>, document.getElementById('content'));
			</script>
		</div>
	</body>
</html>